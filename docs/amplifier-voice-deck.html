<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amplifier Voice: From Zero to Real-Time AI in Two Weeks</title>
<style>
:root {
    --accent: #FF375F;
    --accent-dim: rgba(255, 55, 95, 0.15);
    --accent-glow: rgba(255, 55, 95, 0.4);
    --bg: #000;
    --fg: #fff;
    --fg-dim: rgba(255,255,255,0.5);
    --fg-muted: rgba(255,255,255,0.7);
    --card-bg: rgba(255,255,255,0.05);
    --card-border: rgba(255,255,255,0.12);
    --code-bg: rgba(255,255,255,0.05);
    --green: #30D158;
    --blue: #0A84FF;
    --purple: #BF5AF2;
    --teal: #64D2FF;
    --orange: #FF9F0A;
    --yellow: #FFD60A;

    --font-headline: clamp(32px, 8vw, 72px);
    --font-medium-headline: clamp(24px, 5vw, 48px);
    --font-subhead: clamp(16px, 3vw, 28px);
    --font-body: clamp(14px, 2vw, 18px);
    --font-small: clamp(12px, 1.5vw, 14px);
    --font-big-number: clamp(48px, 15vw, 140px);
    --font-code: clamp(12px, 1.8vw, 15px);
    --padding-slide: clamp(24px, 5vw, 80px);
    --gap-grid: clamp(16px, 3vw, 32px);

    /* Surface hierarchy (injected by deck-style-fix) */
    --surface-1: rgba(255,255,255,0.06);
    --surface-2: rgba(255,255,255,0.10);
    --surface-3: rgba(255,255,255,0.15);
    --border-subtle: rgba(255,255,255,0.12);
    --text-primary: #ffffff;
    --text-readable: rgba(255,255,255,0.7);
    --text-muted-floor: rgba(255,255,255,0.5);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--fg);
    overflow: hidden;
    overscroll-behavior: none;
    -webkit-font-smoothing: antialiased;
}

.deck { position: relative; width: 100vw; height: 100vh; height: 100dvh; }

.slide {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: var(--padding-slide);
    opacity: 0;
    transform: translateX(40px);
    transition: opacity 0.5s ease, transform 0.5s ease;
    pointer-events: none;
    overflow-y: auto;
    overflow-x: hidden;
}

.slide.active {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
}

.slide.exit-left {
    opacity: 0;
    transform: translateX(-40px);
}

/* Typography */
.section-label {
    font-size: var(--font-small);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--accent);
    margin-bottom: 16px;
}

.headline {
    font-size: var(--font-headline);
    font-weight: 700;
    letter-spacing: -2px;
    line-height: 1.05;
    margin-bottom: 20px;
}

.medium-headline {
    font-size: var(--font-medium-headline);
    font-weight: 700;
    letter-spacing: -1px;
    line-height: 1.1;
    margin-bottom: 16px;
}

.subhead {
    font-size: var(--font-subhead);
    font-weight: 400;
    color: var(--fg-muted);
    line-height: 1.4;
    max-width: 700px;
}

.body-text {
    font-size: var(--font-body);
    color: var(--fg-muted);
    line-height: 1.6;
}

/* Layouts */
.grid-2 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
    gap: var(--gap-grid);
    margin-top: 24px;
}

.grid-3 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(220px, 100%), 1fr));
    gap: var(--gap-grid);
    margin-top: 24px;
}

.grid-4 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(180px, 100%), 1fr));
    gap: var(--gap-grid);
    margin-top: 24px;
}

/* Cards */
.card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: clamp(16px, 3vw, 28px);
}

.card-accent {
    background: var(--accent-dim);
    border: 1px solid var(--accent-glow);
    border-radius: 16px;
    padding: clamp(16px, 3vw, 28px);
}

.card-title {
    font-size: clamp(16px, 2.5vw, 20px);
    font-weight: 600;
    margin-bottom: 8px;
}

.card-desc {
    font-size: var(--font-body);
    color: var(--fg-dim);
    line-height: 1.5;
}

/* Code blocks */
.code-block {
    background: var(--code-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: clamp(12px, 3vw, 20px) clamp(16px, 3vw, 24px);
    font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', 'Courier New', monospace;
    font-size: var(--font-code);
    line-height: 1.6;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-top: 16px;
}

.code-block .kw { color: var(--accent); }
.code-block .str { color: var(--green); }
.code-block .cm { color: rgba(255,255,255,0.35); }
.code-block .fn { color: var(--teal); }
.code-block .type { color: var(--purple); }
.code-block .num { color: var(--orange); }
.code-block .bool { color: var(--orange); }

/* Flow diagram */
.flow {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 20px;
}

.flow-step {
    padding: 12px 20px;
    border-radius: 12px;
    font-size: clamp(13px, 2vw, 16px);
    font-weight: 600;
    white-space: nowrap;
}

.flow-arrow {
    font-size: 20px;
    color: var(--fg-dim);
}

/* Timeline */
.timeline { margin-top: 24px; }

.timeline-item {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    padding: 16px 0;
    border-bottom: 1px solid rgba(255,255,255,0.06);
}

.timeline-item:last-child { border-bottom: none; }

.timeline-date {
    font-size: var(--font-small);
    font-weight: 600;
    color: var(--accent);
    min-width: 70px;
    padding-top: 2px;
}

.timeline-label {
    font-size: clamp(14px, 2vw, 16px);
    font-weight: 600;
    color: var(--fg);
}

.timeline-desc {
    font-size: clamp(13px, 1.8vw, 15px);
    color: var(--fg-dim);
    margin-top: 4px;
    line-height: 1.4;
}

/* Big numbers */
.big-number {
    font-size: var(--font-big-number);
    font-weight: 800;
    letter-spacing: -4px;
    background: linear-gradient(135deg, var(--accent), #FF9F0A);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
}

.stat-label {
    font-size: var(--font-body);
    color: var(--fg-dim);
    margin-top: 8px;
}

/* Comparison */
.comparison {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 24px;
    align-items: start;
    margin-top: 24px;
}

.comparison-divider {
    width: 1px;
    height: 100%;
    min-height: 200px;
    background: var(--card-border);
    align-self: stretch;
}

@media (max-width: 700px) {
    .comparison {
        grid-template-columns: 1fr;
    }
    .comparison-divider {
        width: 100%;
        height: 1px;
        min-height: auto;
    }
}

/* Pill tags */
.pill {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: clamp(11px, 1.5vw, 13px);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-right: 8px;
    margin-bottom: 6px;
}

/* Strikethrough fade */
.struck {
    text-decoration: line-through;
    color: var(--fg-dim);
    opacity: 0.5;
}

/* Navigation */
.nav-dots {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    z-index: 100;
}

.nav-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    padding: 0;
}

.nav-dot.active {
    background: var(--accent);
    box-shadow: 0 0 8px var(--accent-glow);
    transform: scale(1.3);
}

.nav-dot:hover { background: rgba(255,255,255,0.4); }

.slide-counter {
    position: fixed;
    bottom: 20px;
    right: 28px;
    font-size: 13px;
    color: var(--fg-dim);
    font-variant-numeric: tabular-nums;
    z-index: 100;
}

/* Click zones */
.click-zone {
    position: fixed;
    top: 0;
    width: 25%;
    height: 100%;
    z-index: 50;
    cursor: pointer;
}

.click-zone.left { left: 0; }
.click-zone.right { right: 0; }

/* Waveform animation for title */
.waveform {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    height: 60px;
    margin: 20px 0;
}

.wave-bar {
    width: 4px;
    background: var(--accent);
    border-radius: 4px;
    animation: wave 1.2s ease-in-out infinite;
}

@keyframes wave {
    0%, 100% { height: 10px; opacity: 0.4; }
    50% { height: 50px; opacity: 1; }
}

/* Pulse dot */
.pulse-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--green);
    display: inline-block;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(48, 209, 88, 0.4); }
    50% { opacity: 0.8; box-shadow: 0 0 0 12px rgba(48, 209, 88, 0); }
}

/* Architecture flow diagram */
.arch-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    margin: 32px 0 20px;
    flex-wrap: wrap;
}

.arch-node {
    padding: 14px 24px;
    border-radius: 14px;
    font-size: clamp(13px, 2vw, 16px);
    font-weight: 600;
    text-align: center;
    min-width: 120px;
}

.arch-connector {
    font-size: 24px;
    color: var(--fg-dim);
    padding: 0 8px;
}

/* Pivot slide styling */
.pivot-number {
    font-size: clamp(80px, 20vw, 160px);
    font-weight: 900;
    color: rgba(255, 55, 95, 0.08);
    position: absolute;
    top: 10%;
    right: 5%;
    line-height: 1;
    pointer-events: none;
}

/* Event badges */
.event-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 12px;
}

.event-badge {
    padding: 6px 14px;
    border-radius: 8px;
    font-size: clamp(11px, 1.5vw, 13px);
    font-weight: 500;
    font-family: 'SF Mono', 'Fira Code', monospace;
}

/* Health status bar */
.health-bar {
    display: flex;
    align-items: center;
    gap: 0;
    margin-top: 16px;
    border-radius: 8px;
    overflow: hidden;
    height: 8px;
}

.health-segment {
    height: 100%;
    transition: width 0.3s ease;
}
</style>
</head>
<body>

<div class="deck" id="deck">

<!-- ============================================ -->
<!-- SLIDE 1: Title -->
<!-- ============================================ -->
<div class="slide active" data-slide="0">
    <div class="section-label">Amplifier Voice</div>
    <div class="waveform">
        <div class="wave-bar" style="animation-delay: 0s; height: 20px;"></div>
        <div class="wave-bar" style="animation-delay: 0.1s; height: 35px;"></div>
        <div class="wave-bar" style="animation-delay: 0.2s; height: 50px;"></div>
        <div class="wave-bar" style="animation-delay: 0.3s; height: 30px;"></div>
        <div class="wave-bar" style="animation-delay: 0.15s; height: 45px;"></div>
        <div class="wave-bar" style="animation-delay: 0.25s; height: 25px;"></div>
        <div class="wave-bar" style="animation-delay: 0.35s; height: 40px;"></div>
        <div class="wave-bar" style="animation-delay: 0.05s; height: 15px;"></div>
        <div class="wave-bar" style="animation-delay: 0.2s; height: 50px;"></div>
        <div class="wave-bar" style="animation-delay: 0.1s; height: 30px;"></div>
        <div class="wave-bar" style="animation-delay: 0.3s; height: 20px;"></div>
        <div class="wave-bar" style="animation-delay: 0.15s; height: 45px;"></div>
    </div>
    <h1 class="headline">From Zero to Real-Time AI<br>in Two Weeks</h1>
    <p class="subhead">A WebRTC voice assistant built on Amplifier.<br>Three architectures. 18 commits. One developer.</p>
    <div style="margin-top: 32px; color: var(--fg-dim); font-size: var(--font-small);">
        Brian Krabach &middot; January 30 &ndash; February 2026
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 2: The Question -->
<!-- ============================================ -->
<div class="slide" data-slide="1">
    <div class="section-label">The Question</div>
    <h2 class="headline" style="max-width: 800px;">&ldquo;Can Amplifier<br>do voice?&rdquo;</h2>
    <p class="subhead" style="margin-top: 20px;">
        Voice is the interface everyone asks about first.<br>
        Not chat. Not IDE. <em>Voice.</em>
    </p>
    <div style="margin-top: 40px;">
        <p class="body-text" style="max-width: 600px;">
            The challenge: voice AI isn't a feature you bolt on.
            It needs real-time streaming, sub-second latency,
            and an architecture that lets an AI <strong style="color: var(--fg);">think while it talks</strong>.
        </p>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 3: The Answer -->
<!-- ============================================ -->
<div class="slide" data-slide="2">
    <div class="section-label">The Answer</div>
    <h2 class="headline">Yes. And it's novel.</h2>
    <p class="subhead" style="margin-top: 12px; margin-bottom: 32px;">
        Not a wrapper around a speech API. A voice-first AI that <em>delegates</em> to a team of specialists.
    </p>
    <div class="arch-flow">
        <div class="arch-node" style="background: rgba(255, 55, 95, 0.15); border: 1px solid var(--accent);">
            <div style="font-size: 24px; margin-bottom: 4px;">&#127908;</div>
            You speak
        </div>
        <div class="arch-connector">&rarr;</div>
        <div class="arch-node" style="background: rgba(10, 132, 255, 0.15); border: 1px solid var(--blue);">
            <div style="font-size: 24px; margin-bottom: 4px;">&#127760;</div>
            WebRTC
        </div>
        <div class="arch-connector">&rarr;</div>
        <div class="arch-node" style="background: rgba(255, 159, 10, 0.15); border: 1px solid var(--orange);">
            <div style="font-size: 24px; margin-bottom: 4px;">&#129504;</div>
            GPT Realtime
        </div>
        <div class="arch-connector">&rarr;</div>
        <div class="arch-node" style="background: rgba(48, 209, 88, 0.15); border: 1px solid var(--green);">
            <div style="font-size: 24px; margin-bottom: 4px;">&#9889;</div>
            Amplifier
        </div>
        <div class="arch-connector">&rarr;</div>
        <div class="arch-node" style="background: rgba(191, 90, 242, 0.15); border: 1px solid var(--purple);">
            <div style="font-size: 24px; margin-bottom: 4px;">&#129302;</div>
            Agent Team
        </div>
    </div>
    <div class="grid-3" style="margin-top: 32px;">
        <div class="card">
            <div class="card-title" style="color: var(--green);">Explore code</div>
            <div class="card-desc">"Look at the auth module and tell me what you find"</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--blue);">Write code</div>
            <div class="card-desc">"Add a caching layer to the API endpoint"</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--purple);">Debug</div>
            <div class="card-desc">"Why is the test for session forking failing?"</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--orange);">Research</div>
            <div class="card-desc">"Find the latest docs on WebRTC data channels"</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--teal);">Architect</div>
            <div class="card-desc">"Design a retry strategy for flaky connections"</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--accent);">Ship</div>
            <div class="card-desc">"Commit this and create a PR"</div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 4: Three Pivots Overview -->
<!-- ============================================ -->
<div class="slide" data-slide="3">
    <div class="section-label">The Journey</div>
    <h2 class="medium-headline">Three Architectures in Four Days</h2>
    <p class="subhead" style="margin-bottom: 8px;">
        Each pivot was a learning moment. Each one made the system fundamentally better.
    </p>
    <div class="timeline">
        <div class="timeline-item">
            <div class="timeline-date">Day 1</div>
            <div>
                <div class="timeline-label">
                    <span class="pill" style="background: rgba(255, 55, 95, 0.2); color: var(--accent);">Pivot 1</span>
                    Many Tools &rarr; Orchestration Only
                </div>
                <div class="timeline-desc">
                    Started with flight tracking, weather, multiple tools exposed to the voice model.
                    Realized: <strong style="color: var(--fg);">a voice model with limited context shouldn't run tools directly.</strong>
                    Stripped everything. Left only <code style="color: var(--green);">task</code>.
                </div>
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-date">Day 3</div>
            <div>
                <div class="timeline-label">
                    <span class="pill" style="background: rgba(10, 132, 255, 0.2); color: var(--blue);">Pivot 2</span>
                    Task Tool &rarr; Delegate Tool
                </div>
                <div class="timeline-desc">
                    <code style="color: var(--green);">task</code> was fire-and-forget. Switched to <code style="color: var(--green);">delegate</code> for
                    context control, session resumption, and provider selection.
                    <strong style="color: var(--fg);">Multi-turn agent conversations became possible.</strong>
                </div>
            </div>
        </div>
        <div class="timeline-item">
            <div class="timeline-date">Day 3</div>
            <div>
                <div class="timeline-label">
                    <span class="pill" style="background: rgba(191, 90, 242, 0.2); color: var(--purple);">Pivot 3</span>
                    Auto-Respond &rarr; Manual Response Control
                </div>
                <div class="timeline-desc">
                    Default behavior: model speaks immediately after detecting silence.
                    New behavior: <strong style="color: var(--fg);">the model decides WHEN to speak, not just what to say.</strong>
                    First attempt reverted. Second attempt succeeded.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 5: Pivot 1 Detail -->
<!-- ============================================ -->
<div class="slide" data-slide="4">
    <div class="pivot-number">1</div>
    <div class="section-label">Pivot 1 &middot; Day 1</div>
    <h2 class="medium-headline">The Voice Model Is an Orchestrator,<br>Not an Executor</h2>
    <div class="comparison" style="margin-top: 24px;">
        <div>
            <div style="font-size: var(--font-small); text-transform: uppercase; letter-spacing: 2px; color: var(--accent); margin-bottom: 16px;">Before</div>
            <div class="code-block"><span class="cm">// Voice model had direct access to everything</span>
tools: [
  <span class="str">"flight_tracker"</span>,
  <span class="str">"weather"</span>,
  <span class="str">"calendar"</span>,
  <span class="str">"todo"</span>,
  <span class="str">"task"</span>,
  <span class="str">"web_search"</span>,
  ...
]</div>
            <p class="body-text" style="margin-top: 12px; color: var(--accent);">
                Too many tools. Limited context window. Model confused about when to use what.
            </p>
        </div>
        <div class="comparison-divider"></div>
        <div>
            <div style="font-size: var(--font-small); text-transform: uppercase; letter-spacing: 2px; color: var(--green); margin-bottom: 16px;">After</div>
            <div class="code-block"><span class="cm">// Voice model has ONE job: orchestrate</span>
REALTIME_TOOLS = {<span class="str">"task"</span>}

<span class="cm">// All real work delegated to specialists</span>
<span class="cm">// explorer, architect, builder, bug-hunter...</span></div>
            <p class="body-text" style="margin-top: 12px; color: var(--green);">
                One tool. Clear purpose. Delegates everything to the right specialist agent.
            </p>
        </div>
    </div>
    <div class="card" style="margin-top: 24px; border-left: 3px solid var(--accent);">
        <div class="card-desc">
            <strong style="color: var(--fg);">Key insight:</strong> A real-time voice model has a tiny context window.
            Don't make it think about tools. Make it think about <em>who to ask</em>.
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 6: Pivot 2 Detail -->
<!-- ============================================ -->
<div class="slide" data-slide="5">
    <div class="pivot-number">2</div>
    <div class="section-label">Pivot 2 &middot; Day 3</div>
    <h2 class="medium-headline">From Fire-and-Forget<br>to Conversation</h2>
    <p class="subhead" style="margin-bottom: 24px;">
        <code style="color: var(--accent);">task</code> created one-shot agents.
        <code style="color: var(--green);">delegate</code> enables multi-turn dialogues with persistent state.
    </p>
    <div class="grid-2">
        <div class="card">
            <div class="card-title" style="color: var(--teal);">Context Control</div>
            <div class="code-block"><span class="cm">// Agent gets exactly the right context</span>
<span class="fn">delegate</span>({
  agent: <span class="str">"foundation:explorer"</span>,
  context_depth: <span class="str">"recent"</span>,  <span class="cm">// none | recent | all</span>
  context_turns: <span class="num">5</span>
})</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--purple);">Session Resumption</div>
            <div class="code-block"><span class="cm">// Resume a prior agent conversation</span>
<span class="fn">delegate</span>({
  agent: <span class="str">"foundation:modular-builder"</span>,
  session_id: <span class="str">"abc-123..."</span>  <span class="cm">// pick up where we left off</span>
})</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--orange);">Provider Selection</div>
            <div class="code-block"><span class="cm">// Voice = GPT Realtime, Agents = Claude</span>
provider_preferences: [
  { provider: <span class="str">"anthropic"</span>,
    model: <span class="str">"claude-sonnet-*"</span> }
]</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--accent);">Specialist Routing</div>
            <div class="code-block"><span class="cm">// Right agent for the right job</span>
<span class="str">"foundation:explorer"</span>      <span class="cm">// scan code</span>
<span class="str">"foundation:bug-hunter"</span>    <span class="cm">// debug</span>
<span class="str">"foundation:zen-architect"</span> <span class="cm">// design</span>
<span class="str">"foundation:git-ops"</span>       <span class="cm">// ship</span></div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 7: Pivot 3 Detail -->
<!-- ============================================ -->
<div class="slide" data-slide="6">
    <div class="pivot-number">3</div>
    <div class="section-label">Pivot 3 &middot; Day 3</div>
    <h2 class="medium-headline">The Model Decides<br>When to Speak</h2>
    <p class="subhead" style="margin-bottom: 24px;">
        Default voice AI: detect silence &rarr; auto-respond.<br>
        Amplifier Voice: detect silence &rarr; <strong style="color: var(--fg);">model chooses its moment.</strong>
    </p>
    <div class="grid-2">
        <div>
            <div class="code-block"><span class="cm">// Semantic VAD + manual response control</span>
session.update({
  audio: {
    input: {
      turn_detection: {
        type: <span class="str">"semantic_vad"</span>,
        eagerness: <span class="str">"low"</span>,
        <span class="kw">create_response: false</span>,  <span class="cm">// KEY</span>
        interrupt_response: <span class="bool">true</span>
      }
    }
  }
})

<span class="cm">// After transcription, client triggers:</span>
dataChannel.<span class="fn">send</span>(
  JSON.<span class="fn">stringify</span>({ type: <span class="str">"response.create"</span> })
)</div>
        </div>
        <div>
            <div class="card" style="margin-bottom: 16px; border-left: 3px solid var(--accent);">
                <div class="card-title">First attempt: reverted</div>
                <div class="card-desc">
                    "True silence mode" was too aggressive.
                    Broke natural conversation flow.
                    <span style="color: var(--accent);">Commit fa859f0 &rarr; Revert 78441f5</span>
                </div>
            </div>
            <div class="card" style="border-left: 3px solid var(--green);">
                <div class="card-title" style="color: var(--green);">Second attempt: shipped</div>
                <div class="card-desc">
                    Separate "detecting end of speech" from "auto-generating response."
                    Model uses instructions to decide engagement level.
                    <span style="color: var(--green);">Commit a2f6042</span>
                </div>
            </div>
            <div class="card" style="margin-top: 16px;">
                <div class="card-title">Why it matters</div>
                <div class="card-desc">
                    The model can <em>listen</em> to a multi-sentence request without
                    interrupting after the first pause. Natural, human-like conversation.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 8: Async Tool Results -->
<!-- ============================================ -->
<div class="slide" data-slide="7">
    <div class="section-label">Hard Problem #1</div>
    <h2 class="medium-headline">Results Arrive While<br>the Model Is Speaking</h2>
    <p class="subhead" style="margin-bottom: 24px;">
        You ask three things. The model starts answering the first.
        Meanwhile, agents finish the other two. What happens?
    </p>
    <div class="grid-2">
        <div>
            <div class="code-block" style="font-size: clamp(11px, 1.6vw, 14px);"><span class="cm">// Track response state</span>
<span class="kw">const</span> responseInProgress = <span class="fn">useRef</span>(<span class="bool">false</span>);
<span class="kw">const</span> pendingAnnouncements = <span class="fn">useRef</span>([]);

<span class="cm">// Tool result arrives while speaking?</span>
<span class="kw">if</span> (responseInProgress.current) {
  <span class="cm">// Queue it. Don't interrupt.</span>
  pendingAnnouncements.current.<span class="fn">push</span>({
    toolName, callId
  });
} <span class="kw">else</span> {
  <span class="cm">// Not speaking? Report immediately.</span>
  <span class="fn">triggerResponse</span>();
}

<span class="cm">// When model finishes speaking:</span>
<span class="kw">case</span> <span class="str">"response.done"</span>:
  responseInProgress.current = <span class="bool">false</span>;
  <span class="fn">setTimeout</span>(() => {
    <span class="kw">if</span> (pending.length > <span class="num">0</span>) {
      <span class="fn">flushPendingAnnouncements</span>();
    }
  }, <span class="num">100</span>);</div>
        </div>
        <div>
            <div style="margin-bottom: 16px;">
                <div class="card-accent">
                    <div class="card-title">The Flush Message</div>
                    <div class="card-desc" style="font-style: italic; color: var(--fg-muted);">
                        "The explorer and architect tasks completed while you were speaking.
                        Please report those results now briefly."
                    </div>
                </div>
            </div>
            <div class="card" style="margin-bottom: 16px;">
                <div class="card-title" style="color: var(--green);">No Interruptions</div>
                <div class="card-desc">Model finishes its current thought before reporting late-arriving results.</div>
            </div>
            <div class="card" style="margin-bottom: 16px;">
                <div class="card-title" style="color: var(--blue);">No Lost Results</div>
                <div class="card-desc">Every tool result is queued and announced. Nothing falls through.</div>
            </div>
            <div class="card">
                <div class="card-title" style="color: var(--purple);">Natural Flow</div>
                <div class="card-desc">Feels like a coworker saying "Oh, and I also found..." after finishing a thought.</div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 9: Concurrent Tool Calls -->
<!-- ============================================ -->
<div class="slide" data-slide="8">
    <div class="section-label">Hard Problem #2</div>
    <h2 class="medium-headline">Concurrent Tool Calls<br>That Don't Collide</h2>
    <p class="subhead" style="margin-bottom: 24px;">
        "Explore the auth module AND check the test coverage" &mdash;
        two agents, running simultaneously, each with a unique tracking ID.
    </p>
    <div class="code-block"><span class="cm">// Each tool call gets a unique ID from OpenAI</span>
<span class="kw">const</span> statusMessage = {
  sender: <span class="str">"system"</span>,
  text: <span class="str">`Delegating to </span><span class="fn">${getFriendlyToolName(toolCall.name)}</span><span class="str">...`</span>,
  <span class="kw">toolCallId: toolCall.id</span>,     <span class="cm">// &lt;-- unique per concurrent call</span>
  toolStatus: <span class="str">"executing"</span>
};

<span class="cm">// Update ONLY this specific call's status on completion</span>
<span class="fn">setMessages</span>(prev => prev.<span class="fn">map</span>(msg =>
  msg.toolCallId === toolCall.id && msg.toolStatus === <span class="str">"executing"</span>
    ? { ...msg, text: <span class="str">`Completed </span><span class="fn">${name}</span><span class="str">`</span>, toolStatus: <span class="str">"completed"</span> }
    : msg
))</div>
    <div class="grid-3" style="margin-top: 24px;">
        <div class="card">
            <div class="card-title" style="color: var(--teal);">Parallel Execution</div>
            <div class="card-desc">Multiple agents run at the same time. No serialization bottleneck.</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--orange);">Isolated Tracking</div>
            <div class="card-desc"><code>toolCallId</code> maps each result to its originating request. No cross-talk.</div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--green);">Live UI Updates</div>
            <div class="card-desc">Each task shows status independently: delegating &rarr; executing &rarr; completed.</div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 10: SSE Event Streaming -->
<!-- ============================================ -->
<div class="slide" data-slide="9">
    <div class="section-label">Debugging Visibility</div>
    <h2 class="medium-headline">22 Event Types, Streamed<br>Live to Your Browser</h2>
    <p class="subhead" style="margin-bottom: 20px;">
        Every Amplifier event &mdash; from LLM requests to agent forks &mdash; appears
        in real-time via Server-Sent Events.
    </p>
    <div class="event-grid">
        <div class="event-badge" style="background: rgba(255, 159, 10, 0.15); color: var(--orange);">&#128316; provider:request</div>
        <div class="event-badge" style="background: rgba(48, 209, 88, 0.15); color: var(--green);">&#128317; provider:response</div>
        <div class="event-badge" style="background: rgba(10, 132, 255, 0.15); color: var(--blue);">&#128295; tool:pre</div>
        <div class="event-badge" style="background: rgba(10, 132, 255, 0.15); color: var(--blue);">&#128295; tool:post</div>
        <div class="event-badge" style="background: rgba(255, 55, 95, 0.15); color: var(--accent);">&#128295; tool:error</div>
        <div class="event-badge" style="background: rgba(191, 90, 242, 0.15); color: var(--purple);">&#128256; session:fork</div>
        <div class="event-badge" style="background: rgba(191, 90, 242, 0.15); color: var(--purple);">&#128256; session:join</div>
        <div class="event-badge" style="background: rgba(100, 210, 255, 0.15); color: var(--teal);">&#129504; thinking:delta</div>
        <div class="event-badge" style="background: rgba(100, 210, 255, 0.15); color: var(--teal);">&#129504; thinking:final</div>
        <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">content_block:start</div>
        <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">content_block:delta</div>
        <div class="event-badge" style="background: rgba(255, 214, 10, 0.15); color: var(--yellow);">&#128276; user:notification</div>
        <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">context:compaction</div>
        <div class="event-badge" style="background: rgba(48, 209, 88, 0.15); color: var(--green);">&#9989; approval:request</div>
    </div>
    <div class="grid-2" style="margin-top: 24px;">
        <div class="card">
            <div class="card-title">Server-Side Hook</div>
            <div class="code-block" style="font-size: clamp(11px, 1.5vw, 13px);"><span class="cm"># Captures ALL Amplifier events</span>
EVENTS_TO_CAPTURE = [
  <span class="str">"content_block:start"</span>,
  <span class="str">"content_block:delta"</span>,
  <span class="str">"thinking:delta"</span>,
  <span class="str">"tool:pre"</span>, <span class="str">"tool:post"</span>,
  <span class="str">"session:fork"</span>, <span class="str">"session:join"</span>,
  <span class="str">"provider:request"</span>,
  <span class="str">"llm:request:raw"</span>,
  ...  <span class="cm"># 22 event types total</span>
]</div>
        </div>
        <div class="card">
            <div class="card-title">Why This Matters</div>
            <div class="card-desc" style="margin-bottom: 12px;">
                Voice AI is a black box. You say something, something happens, you get audio back.
                <strong style="color: var(--fg);">SSE streaming makes the invisible visible.</strong>
            </div>
            <div class="card-desc">
                See Claude thinking. See agents spawning. See tool calls executing.
                See token costs accumulating. All in real-time, in a browser console with
                color-coded icons.
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 11: Connection Health -->
<!-- ============================================ -->
<div class="slide" data-slide="10">
    <div class="section-label">Production Resilience</div>
    <h2 class="medium-headline">Connection Health Monitoring<br>and Smart Reconnection</h2>
    <p class="subhead" style="margin-bottom: 24px;">
        WebRTC sessions have a 60-minute hard limit. Connections drop. Networks flake.
        The system handles all of it.
    </p>
    <div class="grid-2">
        <div>
            <div class="card" style="margin-bottom: 16px;">
                <div class="card-title">Health States</div>
                <div style="display: flex; gap: 16px; margin-top: 12px; flex-wrap: wrap;">
                    <div><span class="pulse-dot" style="background: var(--green);"></span>&ensp;<span class="body-text">Healthy</span></div>
                    <div><span class="pulse-dot" style="background: var(--yellow); animation: none;"></span>&ensp;<span class="body-text">Warning</span></div>
                    <div><span class="pulse-dot" style="background: var(--accent); animation: none;"></span>&ensp;<span class="body-text">Critical</span></div>
                    <div><span class="pulse-dot" style="background: var(--fg-dim); animation: none;"></span>&ensp;<span class="body-text">Disconnected</span></div>
                </div>
            </div>
            <div class="card" style="margin-bottom: 16px;">
                <div class="card-title">Disconnect Reasons Tracked</div>
                <div class="event-grid" style="margin-top: 8px;">
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">idle_timeout</div>
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">session_limit</div>
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">connection_failed</div>
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">data_channel_closed</div>
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">stale_connection</div>
                    <div class="event-badge" style="background: rgba(255,255,255,0.08); color: var(--fg-muted);">network_error</div>
                </div>
            </div>
        </div>
        <div>
            <div class="card" style="margin-bottom: 16px;">
                <div class="card-title">Thresholds</div>
                <div class="code-block" style="font-size: clamp(11px, 1.5vw, 13px);">idleWarning:     <span class="num">2 min</span>
sessionWarning:  <span class="num">55 min</span>  <span class="cm">// 5 min before limit</span>
sessionLimit:    <span class="num">60 min</span>  <span class="cm">// OpenAI hard cap</span>
staleThreshold:  <span class="num">30 sec</span></div>
            </div>
            <div class="card">
                <div class="card-title">4 Reconnection Strategies</div>
                <div style="margin-top: 8px;">
                    <div class="body-text" style="margin-bottom: 6px;"><strong style="color: var(--fg);">manual</strong> &mdash; User clicks to reconnect</div>
                    <div class="body-text" style="margin-bottom: 6px;"><strong style="color: var(--fg);">auto_immediate</strong> &mdash; Instant retry</div>
                    <div class="body-text" style="margin-bottom: 6px;"><strong style="color: var(--fg);">auto_delayed</strong> &mdash; Backoff then retry</div>
                    <div class="body-text"><strong style="color: var(--fg);">proactive</strong> &mdash; Reconnect before expiry</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 12: The Stack -->
<!-- ============================================ -->
<div class="slide" data-slide="11">
    <div class="section-label">The Stack</div>
    <h2 class="medium-headline">Two Processes. Zero Wrappers.<br>Direct API Calls.</h2>
    <div class="grid-2" style="margin-top: 20px;">
        <div class="card">
            <div class="card-title" style="color: var(--accent); margin-bottom: 12px;">voice-server &middot; Python</div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">FastAPI</strong> + <strong style="color: var(--fg);">Uvicorn</strong> &mdash; HTTP/SSE server
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">httpx</strong> &mdash; Async OpenAI Realtime API calls
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">amplifier-foundation</strong> &mdash; Agent framework
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">sse-starlette</strong> &mdash; Event streaming
            </div>
            <div class="body-text" style="color: var(--fg-dim); margin-top: 16px; font-size: var(--font-small);">
                Amplifier bridge executes tools via direct Python calls. Zero subprocess overhead.
            </div>
        </div>
        <div class="card">
            <div class="card-title" style="color: var(--teal); margin-bottom: 12px;">voice-client &middot; TypeScript</div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">React 18</strong> + <strong style="color: var(--fg);">Vite</strong> &mdash; UI framework
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">Fluent UI</strong> + <strong style="color: var(--fg);">Copilot Components</strong> &mdash; Microsoft design system
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">Zustand</strong> &mdash; Lightweight state management
            </div>
            <div class="body-text" style="margin-bottom: 8px;">
                <strong style="color: var(--fg);">WebRTC</strong> &mdash; Real-time audio streaming
            </div>
            <div class="body-text" style="color: var(--fg-dim); margin-top: 16px; font-size: var(--font-small);">
                5 custom hooks: useWebRTC, useVoiceChat, useChatMessages, useAmplifierEvents, useConnectionHealth
            </div>
        </div>
    </div>
    <div class="card" style="margin-top: 20px;">
        <div class="card-title" style="color: var(--orange);">Multi-Model Architecture</div>
        <div class="body-text" style="margin-top: 8px;">
            <strong style="color: var(--fg);">Voice layer:</strong> OpenAI <code>gpt-realtime</code> (GA) &mdash; speech-to-speech, real-time audio<br>
            <strong style="color: var(--fg);">Agent layer:</strong> Anthropic Claude Sonnet &mdash; deep reasoning, code generation, tool use<br>
            <span style="color: var(--fg-dim);">Each model does what it's best at. Voice handles conversation. Claude handles thinking.</span>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 13: Velocity / By The Numbers -->
<!-- ============================================ -->
<div class="slide" data-slide="12">
    <div class="section-label">Velocity</div>
    <h2 class="medium-headline">By the Numbers</h2>
    <div class="grid-3" style="margin-top: 24px;">
        <div style="text-align: center;">
            <div class="big-number">18</div>
            <div class="stat-label">commits</div>
        </div>
        <div style="text-align: center;">
            <div class="big-number">4</div>
            <div class="stat-label">days of development</div>
        </div>
        <div style="text-align: center;">
            <div class="big-number">1</div>
            <div class="stat-label">developer</div>
        </div>
    </div>
    <div class="grid-4" style="margin-top: 32px;">
        <div class="card" style="text-align: center;">
            <div style="font-size: clamp(28px, 6vw, 48px); font-weight: 800; color: var(--accent);">3</div>
            <div class="stat-label">architecture pivots</div>
        </div>
        <div class="card" style="text-align: center;">
            <div style="font-size: clamp(28px, 6vw, 48px); font-weight: 800; color: var(--green);">100+</div>
            <div class="stat-label">research docs</div>
        </div>
        <div class="card" style="text-align: center;">
            <div style="font-size: clamp(28px, 6vw, 48px); font-weight: 800; color: var(--blue);">5</div>
            <div class="stat-label">custom React hooks</div>
        </div>
        <div class="card" style="text-align: center;">
            <div style="font-size: clamp(28px, 6vw, 48px); font-weight: 800; color: var(--purple);">22</div>
            <div class="stat-label">event types streamed</div>
        </div>
    </div>
    <div class="card" style="margin-top: 24px; border-left: 3px solid var(--green);">
        <div class="card-desc">
            <strong style="color: var(--fg);">Why this was possible:</strong>
            Amplifier's modular architecture meant each pivot was a configuration change, not a rewrite.
            The voice model didn't need to change &mdash; only its relationship to the agent framework did.
            Three architectures. Same voice client. Same agent roster.
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 14: What's Novel -->
<!-- ============================================ -->
<div class="slide" data-slide="13">
    <div class="section-label">What's Novel</div>
    <h2 class="medium-headline">Not a Demo. A Pattern.</h2>
    <div class="grid-2" style="margin-top: 20px;">
        <div>
            <div class="card" style="margin-bottom: 16px; border-left: 3px solid var(--accent);">
                <div class="card-title">Voice as Orchestration Layer</div>
                <div class="card-desc">
                    Most voice assistants are single-model, single-tool systems.
                    This is a voice interface to a <em>team</em> of AI specialists.
                    The voice model doesn't write code &mdash; it coordinates the agents that do.
                </div>
            </div>
            <div class="card" style="margin-bottom: 16px; border-left: 3px solid var(--green);">
                <div class="card-title">Intentional Speech</div>
                <div class="card-desc">
                    Manual response control means the model is never forced to speak.
                    It can listen to complex, multi-sentence requests.
                    It can think before responding.
                    It speaks when it has something to say.
                </div>
            </div>
            <div class="card" style="border-left: 3px solid var(--blue);">
                <div class="card-title">Async-First Architecture</div>
                <div class="card-desc">
                    Tool results arrive whenever they're ready &mdash; before, during, or after
                    the model speaks. The system handles all three cases gracefully.
                    No blocking. No dropped results.
                </div>
            </div>
        </div>
        <div>
            <div class="card" style="margin-bottom: 16px; border-left: 3px solid var(--purple);">
                <div class="card-title">Multi-Model by Design</div>
                <div class="card-desc">
                    GPT Realtime for voice. Claude for reasoning.
                    Each model does what it's best at.
                    Not a compromise &mdash; an architecture.
                </div>
            </div>
            <div class="card" style="margin-bottom: 16px; border-left: 3px solid var(--orange);">
                <div class="card-title">Full Observability</div>
                <div class="card-desc">
                    22 event types streamed live. See every LLM call,
                    every tool execution, every agent fork.
                    Voice AI doesn't have to be a black box.
                </div>
            </div>
            <div class="card" style="border-left: 3px solid var(--teal);">
                <div class="card-title">Rapid Architecture Evolution</div>
                <div class="card-desc">
                    Three fundamental pivots in four days.
                    Amplifier's modularity made each change surgical, not seismic.
                    The lesson: good infrastructure enables fearless iteration.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- SLIDE 15: CTA -->
<!-- ============================================ -->
<div class="slide" data-slide="14">
    <div class="section-label">What's Next</div>
    <div class="waveform" style="height: 40px; margin-bottom: 24px;">
        <div class="wave-bar" style="animation-delay: 0s; height: 15px;"></div>
        <div class="wave-bar" style="animation-delay: 0.15s; height: 30px;"></div>
        <div class="wave-bar" style="animation-delay: 0.25s; height: 20px;"></div>
        <div class="wave-bar" style="animation-delay: 0.1s; height: 35px;"></div>
        <div class="wave-bar" style="animation-delay: 0.3s; height: 25px;"></div>
        <div class="wave-bar" style="animation-delay: 0.2s; height: 40px;"></div>
        <div class="wave-bar" style="animation-delay: 0.05s; height: 18px;"></div>
        <div class="wave-bar" style="animation-delay: 0.35s; height: 30px;"></div>
    </div>
    <h2 class="headline">Talk to your code.</h2>
    <p class="subhead" style="margin-top: 16px; margin-bottom: 40px;">
        Amplifier Voice proves that voice isn't just a UI layer &mdash;
        it's a fundamentally different way to interact with AI agent teams.
    </p>
    <div class="grid-3">
        <div class="card-accent">
            <div class="card-title">Try It</div>
            <div class="card-desc">Clone amplifier-voice. Follow QUICKSTART.md. Talking to agents in under 5 minutes.</div>
        </div>
        <div class="card-accent">
            <div class="card-title">Extend It</div>
            <div class="card-desc">Add your own agents. Home Assistant integration is already in progress.</div>
        </div>
        <div class="card-accent">
            <div class="card-title">Learn From It</div>
            <div class="card-desc">100+ research docs in ai-context/. Architecture decisions documented in every commit.</div>
        </div>
    </div>
    <div style="margin-top: 40px; color: var(--fg-dim); font-size: var(--font-small);">
        Built by Brian Krabach &middot; Powered by Amplifier &middot; January &ndash; February 2026
    </div>
</div>

</div><!-- /deck -->

<!-- Navigation -->
<div class="nav-dots" id="navDots"></div>
<div class="slide-counter" id="slideCounter">1 / 15</div>
<div class="click-zone left" id="clickLeft"></div>
<div class="click-zone right" id="clickRight"></div>

<script>
(function() {
    const slides = document.querySelectorAll('.slide');
    const navDots = document.getElementById('navDots');
    const counter = document.getElementById('slideCounter');
    const total = slides.length;
    let current = 0;
    let transitioning = false;

    // Build nav dots
    for (let i = 0; i < total; i++) {
        const dot = document.createElement('button');
        dot.className = 'nav-dot' + (i === 0 ? ' active' : '');
        dot.addEventListener('click', () => goTo(i));
        navDots.appendChild(dot);
    }

    function goTo(n) {
        if (n === current || n < 0 || n >= total || transitioning) return;
        transitioning = true;

        const prev = slides[current];
        const next = slides[n];
        const dots = navDots.querySelectorAll('.nav-dot');

        // Direction
        const goingForward = n > current;

        // Exit current
        prev.classList.remove('active');
        prev.classList.add(goingForward ? 'exit-left' : '');
        prev.style.transform = goingForward ? 'translateX(-40px)' : 'translateX(40px)';

        // Enter next
        next.style.transform = goingForward ? 'translateX(40px)' : 'translateX(-40px)';
        next.style.opacity = '0';

        requestAnimationFrame(() => {
            next.classList.add('active');
            next.style.transform = '';
            next.style.opacity = '';
        });

        // Update dots
        dots[current].classList.remove('active');
        dots[n].classList.add('active');

        // Update counter
        counter.textContent = (n + 1) + ' / ' + total;

        current = n;

        setTimeout(() => {
            prev.classList.remove('exit-left');
            prev.style.transform = '';
            transitioning = false;
        }, 500);
    }

    function next() { goTo(current + 1); }
    function prev() { goTo(current - 1); }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); next(); }
        if (e.key === 'ArrowLeft') { e.preventDefault(); prev(); }
        if (e.key === 'Home') { e.preventDefault(); goTo(0); }
        if (e.key === 'End') { e.preventDefault(); goTo(total - 1); }
    });

    // Click zones
    document.getElementById('clickLeft').addEventListener('click', prev);
    document.getElementById('clickRight').addEventListener('click', next);

    // Touch support
    let touchStartX = 0;
    document.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; }, { passive: true });
    document.addEventListener('touchend', (e) => {
        const dx = e.changedTouches[0].clientX - touchStartX;
        if (Math.abs(dx) > 50) { dx < 0 ? next() : prev(); }
    }, { passive: true });
})();
</script>

</body>
</html>